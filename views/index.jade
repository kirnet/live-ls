extends layout

block content
  script(src="/js/script.js")
  h1= 'Токены'

  button.btn.btn-primary(type='button', data-toggle="modal", data-target="#add_token") Добавить
  br
  br
  table.table.tokens
    tr
      th id
      th Токен
      th Истекает
      th Действия
    for token, i in tokens
      tr
        td.id(data-id='#{token.id}') #{token.id}
        td
          input.form-control.token.show_save(type='text', value="#{token.token}")
        td
          input.form-control.show_save(type='text', value="#{ moment(1000 * token.expire).format('DD.MM.YYYY') }")
        td.action_column
          button.save_token.btn.btn-primary.hidden(type='button') Сохранить
          span &nbsp;
          button.btn.btn-danger.delete_token(type='button', data-token_id='#{token.id}') Удалить

  div.modal.fade(tabindex="-1", role="dialog")#add_token
    div.modal-dialog(role="document")
      div.modal-content
        div.modal-header
          button(type="button", class="close", data-dismiss="modal", aria-label="Close")
            span(aria-hidden="true") &times;
          h4.modal-title Добавление токена
        div.modal-body
          form.new_token(action='/livestreet/add_token', method='put')
            table.table
              tr
                th Токен
                th Истекает
              tr
                td
                  input.form-control.token(type='text', name='token')
                td
                  input.form-control.expire(type='text', name='expire')
        div.modal-footer
          //button(type="button" class="btn btn-default" data-dismiss="modal") Close
          button(type="button" class="btn btn-primary send_token") Сохранить

  div.modal.fade(tabindex="-1", role="dialog")#confirm_dialog
    div.modal-dialog(role="document")
      div.modal-content
        div.modal-header
          button(type="button", class="close", data-dismiss="modal", aria-label="Close")
            span(aria-hidden="true") &times;
          h4.modal-title Внимание
        div.modal-body
          span#confirm_data Вы действительно хотите удалить токен?

        div.modal-footer
          button(type="button" class="btn btn-default" data-dismiss="modal") Нет
          button(type="button" class="btn btn-danger confirm_yes") Да